
## 测试

现在程序已经远比之前时代的更大也更复杂，也有许多技术可以让软件的复杂性可得到
控制。其中之一便是测试。

我们说测试的时候一般是指自动化测试，也就是写一些小的程序来检测被测试代码的
行为和预期的一样，这些通常是精心设计的执行某些特定的功能或者是通过随机性
的输入验证边界的处理。

软件测试是一个巨大的领域，测试的任务可能已经占据一些程序员的部分时间和
另一些程序元的全部时间，和软件测试技术相关的图书或博客文章有成千上万
之多，对于每一种主流的编程语言，都会有一打的用于测试的软件包，同时也有
大量的测试相关的理论。

在实践中，编写测试代码和编写程序本身并没有多大区别，我们编写的每一个函数
也是针对每个具体的任务，我们必须小心处理边界条件，思考合适的数据结构，
推断合适的输入应该产生什么样的结果输出，编写测试代码和编写普通的Go代码
过程是类似的，它并不需要学习新的符号、规则和工具。

### go test

go test命令是按照以一定的约定和组织来测试代码的程序，在包目录内，所有以
`_test.go`为后缀名的源文件在执行go build时不会被构建成包的一部分，它们
是go test测试的一部分。

在`*_test.go`文件中，有三种类型的函数，测试函数、基准测试（benchmark）函数、
示例函数。一个测试函数是以Test为函数名前缀的函数，用于测试程序的一些逻辑行为
是否正确，go test命令会调用这些测试函数并报告测试结果是PASS或FALL；
基准测试函数是以Benchmark为函数名前缀的函数，它们用于衡量一些函数的性能，
go test命令会多次运行基准测试函数以计算一个平均的执行时间；示例函数是以
Example为函数名前缀的函数，提供一个有编译器保证正确性的示例文档。

go test命令会遍历所有`*_test.go`文件中符合上述命名规则的函数，生成一个
临时的main包用于调用相应的测试函数，接着构建并运行、报告测试结果，最后
清理测试中生成的临时文件。



